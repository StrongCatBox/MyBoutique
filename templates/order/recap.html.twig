{% extends 'base.html.twig' %}

{% block title %}Verifier ma Commande
{% endblock %}

{% block content %}

	<div class="m-5">

		<h1 class="mt-3">Je verifie ma commande</h1>
		<p>Verifier votre commande avant de payer</p>
		<hr>

		<div class="row">

			<div class="col-md-6">

				<strong>Adresse de livraison</strong><br>
				{{order.delivery | replace({'[br]': '<br>'}) | raw}}
				<hr>
				<strong>Mon transporteur
				</strong><br>

				{{order.carrier.name}}<br>
				{{order.carrier.description}}<br>
				{{order.carrier.price}}
				€

			</div>

			<div class="col-md-6">

				{% set total = null %}
				{% for product in cart %}
					{% set total = total + product.quantity * product.product.price %}


					<div class="row mt-3">
						<div class="col-2">
							<img src="/uploads/{{product.product.picture}}" alt="{{product.product.name}}" class="img-fluid">
						</div>

						<div class="col-8">
							{{product.product.name}}<br>
							<i>{{product.product.subtitle}}</i>
						</div>

						<div class="col-2 my-auto">{{product.quantity}}</div>

					</div>

				{% endfor %}

				<hr>
				<strong>Sous-total</strong>
				{{total/100 | number_format(2)}}
				€<br>
				<strong>Livraison:</strong>
				{{order.carrier.price}}
				€<br>
				<hr>
				<strong>Total:
				</strong>
				{{(total/100 + order.carrier.price) | number_format(2)}}
				€

			</div>


		</div>

	</div>

{% endblock %}
